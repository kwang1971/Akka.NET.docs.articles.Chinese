---
uid: location-transparency
title: Location Transparency
---

 ＃位置透明
 前面的部分描述了如何使用actor路径来启用位置透明。这个特殊的特性值得一些额外的解释，因为在编

程语言，平台和技术方面，相关术语"transparent remoting"的使用方式完全不同。

 ##默认分布式 
Akka.NET中的所有内容都设计为在分布式环境中工作：actor的所有交互都使用纯粹的消息传递，并且所有

内容都是异步的。这一努力的目的是确保所有功能在单个CLR或数百台机器集群中运行时均可获得。实现这

一目标的关键是通过优化从远程到本地，而不是通过泛化的方式从本地到远程。

 

 ##透明度被破坏的方式
对于使用它的应用程序来说，Akka.NET的真实情况并非必须如此，因为针对分布式执行的设计对可能性有

一定的限制。最明显的是通过线路发送的所有消息必须是可序列化的。如果要在远程节点上创建actor，那

么包括用作actor工厂（即在 `Props`内）的闭包不太明显。另一个结果是，所有事情都需要知道所有的交

互是完全异步的，这在计算机网络中可能意味着消息可能需要几分钟才能到达其接收者（取决于配置）。

这也意味着消息丢失的可能性远高于一个CLR内的接近零的概率（仍然：没有硬性保证！）。


##如何使用远程处理？
 我们将透明度的想法到这个程度，几乎没有API用于Akka远程层：它完全由配置驱动。只需根据前几节中

概述的原则编写应用程序，然后在配置文件中指定actor子树的远程部署。这样，你的应用程序就可以被扩

展出来而不需要触摸代码。只允许编程影响远程部署的API的一部分是`Props`包含一个可以设置为特定

`Deploy`实例的字段; 这与将等同的部署放入配置文件（如果两者都给出，配置文件获胜）具有相同的效

果。
  ##P2P与客户端 - 服务器
Akka.NET Remoting是一种通信模块，用于以对等方式连接actor系统，它是Akka Clustering的基础。

远程处理的设计由两个（相关）设计决定驱动：

相关系统之间的通信是对称的：如果系统A可以连接到系统B，则系统B也必须能够独立地连接到系统A.

通信系统的角色关于连接模式是对称的：没有只接受连接的系统，并且没有系统只发起连接。

这些决定的结果是，不可能安全地创建具有预定义角色的纯客户端 - 服务器设置（违反假设2）。

对于客户端 - 服务器设置，最好使用Akka I / O。

> [！重要]
>使用涉及网络地址转换，负载平衡器或Docker容器的设置违反了假设1，除非在网络配置中采取额外步骤

以允许涉及的系统之间的对称通信。

在这种情况下，Akka可以配置为绑定到与用于建立Akka.NET节点之间连接的网络地址不同的网络地址。
##利用路由器扩展标记点 
除了能够在一个集群的不同节点上运行actor系统的不同部分之外，还可以通过乘以支持并行化的actor子

树来扩展到更多核心（例如，考虑一个搜索引擎处理不同的查询 平行）。然后克隆可以以不同的方式被路

由到，例如，循环赛。唯一需要做到这一点的是开发者需要将某个actor声明为`WithRouter`，然后 - 代

替 - 创建一个路由器actor，它将生成一个可配置数量的所需类型的子节点，并将其路由到 他们以配置的

方式。一旦声明了这样的路由器，就可以从配置文件中自由覆盖其配置，包括将其与远程部署的（一些）

儿童混合使用。在[Routing]（xref:routers）中阅读更多关于此的内容。
